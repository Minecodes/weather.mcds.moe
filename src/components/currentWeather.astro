---
import "../styles/global.css";
import { type CurrentCondition, type Area } from "../lib/wttrin";

interface Props {
  currentWeather: CurrentCondition;
  nearestArea: Area;
}

const { currentWeather, nearestArea } = Astro.props;

let weatherCondition = "";
let weatherIcon = "";

switch (Number(currentWeather.weatherCode)) {
  case 113:
    weatherCondition = "Clear";
    weatherIcon = "â˜€ï¸";
    break;
  case 116:
    weatherCondition = "Partly Cloudy";
    weatherIcon = "ğŸŒ¤ï¸";
    break;
  case 119:
    weatherCondition = "Cloudy";
    weatherIcon = "â˜ï¸";
    break;
  case 122:
    weatherCondition = "Overcast";
    weatherIcon = "â˜ï¸";
    break;
  case 143:
    weatherCondition = "Mist";
    weatherIcon = "ğŸŒ«ï¸";
    break;
  case 176:
    weatherCondition = "Patchy rain possible";
    weatherIcon = "ğŸŒ§ï¸";
    break;
  case 179:
    weatherCondition = "Patchy snow possible";
    weatherIcon = "ğŸŒ¨ï¸";
    break;
  case 182:
    weatherCondition = "Patchy sleet possible";
    weatherIcon = "ğŸŒ¨ï¸";
    break;
  case 185:
    weatherCondition = "Patchy freezing drizzle possible";
    weatherIcon = "ğŸŒ¨ï¸";
    break;
  case 200:
    weatherCondition = "Thundery outbreaks possible";
    weatherIcon = "â›ˆï¸";
    break;
  case 227:
    weatherCondition = "Blowing snow";
    weatherIcon = "ğŸŒ¨ï¸ğŸƒ";
    break;
  case 230:
    weatherCondition = "Blizzard";
    weatherIcon = "ğŸŒ¨ï¸â›ˆï¸";
    break;
  case 248:
    weatherCondition = "Fog";
    weatherIcon = "ğŸŒ«ï¸";
    break;
  case 260:
    weatherCondition = "Freezing fog";
    weatherIcon = "ğŸŒ«ï¸â„ï¸";
    break;
  case 263:
    weatherCondition = "Patchy light drizzle";
    weatherIcon = "ğŸŒ§ï¸";
    break;
  case 266:
    weatherCondition = "Light drizzle";
    weatherIcon = "ğŸŒ§ï¸";
    break;

  default:
    break;
}
---

<div>
  <h2 class="text-3xl">
    {nearestArea.areaName[0].value}, {nearestArea.country[0].value}
  </h2>
  <div class="flex flex-col items-center">
    <h2 class="text-9xl">{weatherIcon}</h2>
    <p class="mt-2">{weatherCondition} {currentWeather.temp_C}Â°C</p>
  </div>
  <div class="flex flex-row justify-center mt-4 space-x-4">
    <p>
      ğŸ’§ {currentWeather.humidity}%
    </p>
    <p>
      ğŸŒªï¸ {currentWeather.windspeedKmph} km/h
    </p>
    <p>â›±ï¸ {currentWeather.uvIndex}</p>
  </div>
</div>
